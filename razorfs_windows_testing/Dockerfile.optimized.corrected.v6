# Optimized RazorFS Testing Dockerfile - Corrected Version v6 (Explicit Copy)\n# Tests the new O(log n) performance improvements\n\nFROM ubuntu:22.04\nENV DEBIAN_FRONTEND=noninteractive\nENV TZ=UTC\nENV DOCKER_ENV=true\n\n# Install dependencies\nRUN apt-get update && apt-get install -y \\\n    build-essential \\\n    gcc \\\n    g++ \\\n    make \\\n    libfuse3-dev \\\n    fuse3 \\\n    e2fsprogs \\\n    btrfs-progs \\\n    reiserfsprogs \\\n    python3 \\\n    python3-pip \\\n    python3-matplotlib \\\n    python3-pandas \\\n    python3-seaborn \\\n    time \\\n    procps \\\n    util-linux \\\n    pkg-config \\\n    && rm -rf /var/lib/apt/lists/*\n\n# Configure FUSE\nRUN echo 'user_allow_other' >> /etc/fuse.conf\n\n# Create directories\nRUN mkdir -p /results /mnt/ext4_test /mnt/btrfs_test /mnt/reiserfs_test /tmp/razor_mount\n\n# Set working directory\nWORKDIR /razor_repo\n\n# Copy files explicitly\nCOPY Makefile /razor_repo/\nCOPY src/ /razor_repo/src/\nCOPY tools/ /razor_repo/tools/\nCOPY fuse/ /razor_repo/fuse/\nCOPY razorfs_windows_testing/ /razor_repo/razorfs_windows_testing/\n\n# Debug: Check what was copied\nRUN echo \"=== Checking copied files ===\" && \\\n    pwd && \\\n    echo \"=== Directory contents ===\" && \\\n    ls -la && \\\n    echo \"=== Makefile details ===\" && \\\n    ls -la Makefile && \\\n    echo \"=== src directory ===\" && \\\n    ls -la src/ && \\\n    echo \"=== tools directory ===\" && \\\n    ls -la tools/ && \\\n    echo \"=== fuse directory ===\" && \\\n    ls -la fuse/ && \\\n    echo \"=== razorfs_windows_testing directory ===\" && \\\n    ls -la razorfs_windows_testing/\n\n# Install Python dependencies\nRUN pip3 install pandas matplotlib seaborn\n\n# Build optimized RazorFS\nRUN echo \"Building RazorFS core library...\" && \\\n    make clean && \\\n    make userspace && \\\n    echo \"Building FUSE implementation...\" && \\\n    cd fuse && \\\n    make clean && \\\n    make all && \\\n    cd .. && \\\n    echo \"RazorFS built successfully\" && \\\n    echo \"Build verification:\" && \\\n    ls -la librazer.a razorfsck fuse/razorfs_fuse\n\n# Set entrypoint\nENTRYPOINT [\"/razor_repo/razorfs_windows_testing/optimized_filesystem_comparison.sh\"]